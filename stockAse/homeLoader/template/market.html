{% extends './header.html' %}

{% block title %} Market {% endblock %}

{% block customStyle %}

{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'css/homeloader_shares.css' %}">

{% endblock %}

{% block content %}
<h2>Market</h2>

<p>
    <marquee scrollamount="15" onmouseover="this.stop();" onmouseout="this.start()"><b><i>Latest: </i></b>
        {% for company in companies %}
        {{ company.company_name }}: ₹{{ company.selling_price }} |
        {% endfor %}
    </marquee>
</p>

{% if market_list %}
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>Company</th>
            <th>Seller</th>
            <th>Quantity</th>
            <th>Cost</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for share in market_list %}
        <tr>
            <td>
                <a class="nav-item"
                    href="{% url 'company_page' share.company.id %}">{{ share.company.company_name }}</a>
            </td>
            <td>
                <a class="nav-item" href="{% url 'view_friend' share.user.id %}">{{ share.user.first_name }}
                    {{ share.user.last_name }}</a>
            </td>
            <td>{{ share.shares_sale }}</td>
            <td>₹ {{ share.company.selling_price }}</td>
            <td>
                <div class="row">
                    <form method="GET" action="{% url 'buy_shares' share.id %}">
                        {% csrf_token %}
                        <button type=" submit" class="btn btn-success mx-2">Buy</button>
                    </form>
                    <form method="GET" action="{% url 'add_to_wish_list' share.id %}">
                        {% csrf_token %}
                        <button type=" submit" class="btn btn-primary mx-2">WishList</button>
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<p>
    <marquee>Sorry! No Shares Available. Come back later.</marquee>
</p>
{% endif %}


{% endblock %}